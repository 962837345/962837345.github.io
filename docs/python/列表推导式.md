---
title: 列表推导式
date: 2021-04-18
tags:
  - python
categories:
  - Python之旅
---

## 列表推导式

```py
list1 = [2, 4, 6]
list2 = [3, 6, 9]

[3 * x for x in list1] # [6, 12, 18]

[x * y for x in list1 for y in list2] # [6, 12, 18, 12, 24, 36, 18, 36, 54]

[list1[i] * list2[i] for i in range(len(list1))] # [6, 24, 54]
```

```py
# 嵌套列表
matrix = [
	[1, 2, 3],
	[4, 5, 6],
	[7, 8, 9]
]

[[row[i] for row in matrix] for i in range(3)] # [[1, 4, 7], [2, 5, 8], [3, 6, 9]]
```

## 生成器表达式

生成器表达式用括号括起来，生成一个生成器，可以转换为列表

```py
my_gen = (i for i in range(11) if i % 2 == 1)

print(my_gen)  # <generator object <genexpr> at 0x0000029427ACEBA0>
print(type(my_gen))  # <class 'generator'>

my_list = list(my_gen)
print(my_list)  # [1, 3, 5, 7, 9]
```

## 字典推导式

```py
# 字典推导式
my_dict = {'name': 'kellen', 'age': 20}

# 将键值互换
rev_dict = {value: key for key, value in my_dict.items()}

print(rev_dict)  # {'kellen': 'name', 20: 'age'}
```

## 集合推导式

```py
# 字典推导式
my_dict = {'name': 'kellen', 'age': 20}

my_set = {key for key, value in my_dict.items()}

# my_set = set(my_dict.keys()) 也可以，但灵活性没有集合推导式高

print(type(my_set))  # <class 'set'>
print(my_set)  # {'name', 'age'}
```


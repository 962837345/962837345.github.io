---
title: 拖拽
date: 2020-07-26
tags:
 - JS
categories:
 - 前端笔记
---

### 拖拽的流程
1. 当鼠标在拖拽元素上按下时，开始拖拽 onmousedown
2. 当鼠标移动时被拖拽元素跟随鼠标移动 onmousemove
3. 当鼠标松开时，被拖拽元素固定在当前位置 onmouseup

```js
var box1 = document.getElementById("box1");
box1.onmousedown = function(event) {
  //鼠标点击div时x的偏移量 == 鼠标.clientX - 元素.offsetLeft
  //鼠标点击div时y的偏移量 == 鼠标.clientY - 元素.offsetTop
  event = event || window.event;
  var ol = event.clientX - box1.offsetLeft;
  var ot = event.clientY - box1.offsetTop;
  
  document.onmousemove = function(event){
      event = event || window.event;
      var left = event.clientX - ol;
      var right = event.clientY - ot;
      
      box1.style.left = left+"px";
      box1.style.top = top+"px";
  };
  
  document.onmouseup = function() {
    //取消document的onmousemove事件
    document.onmousemove = null;
    //取消document的onmouseup事件
    document.ommouseup = null;
  };
  //取消浏览器默认拖拽事件
  return false
};
```
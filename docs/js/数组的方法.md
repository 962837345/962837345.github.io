---
title: 数组的方法
date: 2020-07-24
tags:
 - JS
categories:
 - 前端笔记
---

 ## concat()
 连接两个或更多的数组，并返回一个新数组
 ```js
let arr = [1,2,3];
let arr2 = [4,5,6];
console.log(arr.concat(arr2))
 ```
输出`[1, 2, 3, 4, 5, 6]`

## join()
把数组的所有元素放入一个字符串，元素通过指定的分隔符进行分隔
```js
let arr = [1,2,3,4,5,6];
console.log(arr.join('-'))
```
输出`1-2-3-4-5-6`

## pop()
删除并返回数组的最后一个元素
```js
let arr = [1,2,3,4,5,6];
console.log(arr.pop());
console.log(arr);
console.log(arr.pop());
console.log(arr)
```
输出
```
6
[1, 2, 3, 4, 5]
5
[1, 2, 3, 4]
```

## push()
向数组的末尾添加一个或多个元素，并返回新的长度
```js
let arr = [1,2,3,4,5,6];
console.log(arr.push(7));
console.log(arr)
```
输出
```
7
[1, 2, 3, 4, 5, 6, 7]
```

## reverse()
颠倒数组中元素的顺序
```js
let arr = [1,2,3,4,5,6];
console.log(arr.reverse())
```
输出`[6, 5, 4, 3, 2, 1]`

## shift()
删除并返回数组的第一个元素
```js
let arr = [1,2,3,4,5,6];
console.log(arr.shift());
console.log(arr)
```
输出
```
1
[2, 3, 4, 5, 6]
```

## slice()
从某个已有的数组返回选定的元素

:::tip
slice()不会改变原来数组
:::
```js
let arr = [1,2,3,4,5,6,7,8,9];
console.log(arr.slice(3,6))
```
输出 `[4, 5, 6]`

## sort()
对数组元素进行排序，`sort()`方法会改变原数组

调用`sort()`方法时如果没有使用参数，将按字母顺序对数组中的元素进行排序，说的更精确点，是按照字符编码的顺序进行排序

```js
let arr = [1,2,5,4,7,6,1,8,5];
console.log(arr.sort())
```
输出 `[1, 1, 2, 4, 5, 5, 6, 7, 8]`

如果向按照其他标准进行排序，就需要提供比较函数，该函数要比较两个值，然后返回一个用于说明这两个值的相对顺序的数字

* 若 a 小于 b，在排序后的数组中 a 应该出现在 b 之前，则返回一个小于0的值
* 若 a 等于 b，则返回0
* 若 a 大于 b，则返回一个大于0的值

```js
const arr = ['2', '4', '1', '3']
console.log(arr.sort((a, b) => {
    return b - a
}))
// ["4", "3", "2", "1"]
```

## splice()
删除元素，并向数组添加新元素

参数说明：
* index：必须，规定从何处增加或删除元素
* howmany：可选，规定应该删除多少元素，必须是数组，可以是0，但未规定该参数时，会删除从index开始原数组结尾的所有元素
* item1...itemN，可选，要添加的数组的新元素

:::tip
splice()会改变原数组,splice()返回的是被删除元素的数组，但howmany为0时，返回空数组
:::

```js
let arr = [1,2,3,4,5,6,7,8,9];
console.log(arr.splice(2,3));
console.log(arr);

let arr1 = [1,2,3,4,5,6,7,8,9];
console.log(arr1.splice(2,3,1,1,1));
console.log(arr1)
```
输出 
```
[3, 4, 5]
[1, 2, 6, 7, 8, 9]
[3, 4, 5]
[1, 2, 1, 1, 1, 6, 7, 8, 9]
```

## indexOf
搜索数组中的元素，并返回它所在的位置

如果没有找到指定元素，则返回-1

```js
let arr = [1,2,3,4,5,6,7,8,9];
console.log(arr.indexOf(5));
console.log(arr.indexOf(10))
```
输出 
```
4
-1
```

## forEach()
forEach()传入一个回调函数，回调函数中有三个参数
* value 数组对应值
* index 数组的下标
* obj   当前正在遍历的数组对象

## ES6中的Array.from()
将类数组或可遍历对象转换为真正的数组

from()数组还可以接受第二个参数，作用类似于数组的map方法，用来对每个元素进行处理，将处理后的值放入返回的数组
```js
  let arrayLike = {
    "0": "张三",
    "1": "李四",
    "2": "王五",
    "length": 3
  };
  let arr = Array.from(arrayLike);
  console.log(arr)    // ["张三", "李四", "王五"]
```

```js
  let arrayLike = {
    "0": 1,
    "1": 2,
    "length": 2
  };
  let arr = Array.from(arrayLike, item => item * 2);
  console.log(arr)    // [2, 4]
```

## ES6中的Array.of()

`Array.of`方法用于将一组值，转换为数组

```js
Array.of(1, 2, 3) // [1, 2, 3]
Array.of(3) // [3]
```

这个方法的主要目的是弥补数组构造函数`Array()`的不足。因为参数个数的不同，会导致`Array()`的行为有差异

```js
Array() // []
Array(3) // [, , ,]
Array(1, 2, 3) // [1, 2, 3]
```

`Array.of`总是返回参数值组成的数组。如果没有参数，就返回一个空数组

## ES6中的find()

用于找出第一个符合条件的数组成员，如果没有找到返回undefined
```js
let arr = [{
  id: 1,
  name: '张三'
},{
  id: 2,
  name: '李四'
}];
let target = arr.find(item => item.id === 2 );
console.log(target)   //{id: 2, name: "李四"}
let target1 = arr.find(item => item.id === 3 );
console.log(target1)   // undefined
```

## ES6中的findIndex()
用于找出第一个符合条件的数组成员的位置，如果没有找到返回-1
```js
let arr = [10,20,30];
let index = arr.findIndex(item => item > 15);
console.log(index);    // 1
let index1 = arr.findIndex(item => item > 40);
console.log(index1);   // -1
```

## ES6中的includes()
表示某个数组是否包含给定的值，返回布尔值
```js
let arr = ["a","b","c"];
let result = arr.includes("b");
console.log(result) // true
```

## map()方法
map方法用于遍历数组中的每个元素，并返回一个新的数组
```js
let arr = [1,2,3];
let result = arr.map(item => item * 2);
console.log(result); // [2,4,6]
```

## filter()方法
filter方法用于过滤某些元素，返回剩下的元素,不会改变原数组
```js
let arr = [1,2,3];
let result = arr.filter(item => item > 2);
console.log(result);  // [3]
```

## reduce()方法
reduce方法用于不断迭代计算数组，最终返回一个值

reduce需要传入两个参数，第一个参数为一个function，第二个为初始迭代值，而第一个function中又有4个参数
* prev：  上次调用函数的返回值
* cur：   当前元素
* index： 当前索引   
* arr：   被遍历的数组

reduce的第二个参数可以省略，省略第二个参数时，会将数组中的第一个元素作为初始值

省略第二个参数的情况：
```js
let arr = [1,2,3];
let result = arr.reduce((prev,cur,index) => {
  console.log(prev,cur,index);
  return prev + cur;
});
console.log(result);
```
输出: 可见只迭代了两次，第一次便把第一个元素作为初始值
```
1 2 1
3 3 2
6
```

不省略第二个参数的情况：
```js
let arr = [1,2,3];
let result = arr.reduce((prev,cur,index) => {
  console.log(prev,cur,index);
  return prev + cur;
},0);
console.log(result);  
```
输出: 可见迭代了三次
```
0 1 0
1 2 1
3 3 2
6
```

## copyWithin()

数组实例的`copyWithin()`方法，在当前数组内部，将指定位置的成员复制到其他位置(会覆盖原有成员)，然后返回当前数组。也就是说，使用这个方法，会修改当前数组

```js
Array.prototype.copyWithin(target, start = 0, end = this.length)
```

它接受三个参数

* target(必须)：从该位置开始替换数据。如果为负值，表示倒数
* start(可选)：从该位置开始读取数据，默认为0。如果为负值，表示从末尾开始计算
* end(可选)：到该位置前停止读取数据，默认等于数组长度。如果为负值，表示从末尾开始计算。

这三个参数都应该是数值，如果不是，会自动转为数值

```js
[1, 2, 3, 4, 5].copyWithin(0, 3) // [4, 5, 3, 4, 5]
```

## entries()，keys()和values()

ES6提供三个新的方法——`entries()`,`keys()`和`values()`——用于遍历数组。它们都返回一个遍历器对象，可以用`for...of`循环进行遍历，唯一的区别是`keys()`是对键名的遍历、`values()`是对键值的遍历，`entries()`是对键值对的遍历

```js
for(let index of ['a', 'b'].keys()){
    console.log(index)
}
// 0
// 1

for(let index of ['a', 'b'].values()){
    console.log(index)
}
// 'a'
// 'b'

for(let index of ['a', 'b'].entries()){
    console.log(index)
}
// 0 'a'
// 1 'b'
```

## for、forEach、map的区别

### forEach和for的区别
1. 在固定长度或者长度不需要计算的时候for循环效率高于forEach，
在不确定长度或者计算长度有损性能的时候用foreach比较方便
2. forEach只适用于进行集合和数组的遍历，for则在复杂的循环中效率更高
3. 如果对集合中的值进行修改，只能用for，不能用forEach，forEach无法用于增加、删除等复杂的操作
4. forEach相比普通的for循环的优势在于对稀疏数组的处理，会跳过数组中的空位

### forEach和map的区别
1. map方法返回一个新数组，数组中的元素为原始数组调用函数处理后的值
2. map方法不会对空数组进行检测，map方法不会改变原数组，如果数组为空数组，调用map也会返回一个空数组
3. forEach对空数组是不会调用回调函数的
4. forEach返回值为undefined